<div style="z-index: 1000;" class="position-absolute top-0 left-0 <%= currentUser ? 'd-none' : 'd-flex' %> flex-column m-0  w-100 h-100 align-items-center">
    <div id="loginCard" style="transform: translateY(-200vh); transition: ease all 2s;" class="card position-fixed m-0 mt-3 shadow border border-secondary">
        <div class="loginSocials">
            <h5 class="card-title text-center">Login with</h5>
            <p>
                <a id="fbkButton" class="btn btn-lg p-1 pb-2 ps-3 pe-3 me-3 btn-primary"><i class="bi bi-facebook pe-2 fs-4"></i><i>Facebook</i></a>
                <span>|</span>
                <a href="/login/ggl" class="btn btn-lg p-1 pb-2 ps-4 pe-4 ms-3 border-warning text-primary"><i class="fs-4">Google</i><i class="bi bi-google ps-2"></i></a>
            </p>
        </div>
        <div class="card-body pt-0">
            <h5 class="card-title text-center">OR</h5>
            <form action="/login/pwd" method="POST" class="validated-form" novalidate>
                <div class="mb-3">
                    <label class="form-label" for="username">Email</label>
                    <input class="form-control" type="email" id="username" name="username" autofocus required>
                </div>

                <div class="mb-3 position-relative">
                    <label class="form-label" for="password">Password</label>
                    <input class="form-control" type="password" id="password" name="password" required>
                    <i role="button" class="bi bi-eye-slash position-absolute bottom-0 end-0 fs-5 p-2 me-4" id="togglePassword"></i>
                </div>
                <div class="d-flex align-items-center">
                    <button class="btn btn-success btn-block me-auto w-50">Login</button>
                    <a class="small btn text-primary w-50" href="/register">Register</a>
                </div>
            </form>
        </div>
    </div>
    <script>
        setTimeout(() => {
            document.getElementById('loginCard').style.transform = 'translateY(0vh)'
        }, 5000)
    </script>
  
  <script>
      const togglePassword = document
          .querySelector('#togglePassword');
  
      const password = document.querySelector('#password');
  
      togglePassword.addEventListener('click', () => {
  
          // Toggle the type attribute using
          // getAttribure() method
          const type = password
              .getAttribute('type') === 'password' ?
              'text' : 'password';
                
          password.setAttribute('type', type);
  
          // Toggle the eye and bi-eye icon
          togglePassword.classList.toggle('bi-eye');
      });
  </script>

    <script>
        window.fbAsyncInit = function() {
        FB.init({
            appId            : '658989752467435',
            autoLogAppEvents : true,
            xfbml            : true,
            version          : 'v15.0'
        });
        };
    </script>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
    <script>
  
      const fbButton = document.querySelector('#fbkButton');
  
      fbButton.addEventListener('click', () => {
  
          FB.getLoginStatus(function(response) {
              if (response.status === 'connected') {
                  fbLogin(response);
              } else {
                  FB.login(function(response){
                      fbLogin(response);
                  }, {scope: 'public_profile,email'});
              }
          }) 
      })
      function fbLogin(response) {
          FB.api('/me?fields=name,email', function (res) {
              const body = {
                  loginType: 'facebook',
                  accessToken: response.authResponse.accessToken,
                  facebookId: response.authResponse.userID,
                  email: res.email,
                  firstName: res.name.split(' ')[0] || 'Facebook',
                  lastName: res.name.split(' ')[1] || 'User',
                  password: '00000000',
              }
              axios.post('/register', body, {
                  headers: {'Content-Type': 'application/json'}
              })
              .then(function (response) {
                  if (response.data.message === 'success') {
                      console.log(response)
                      return window.location.href = response.data.redirectUrl;
                  }
                  alert(response)
              })
              .catch(function (error) {
                  alert(error);
              });
          })
      }
  
    </script>
</div>