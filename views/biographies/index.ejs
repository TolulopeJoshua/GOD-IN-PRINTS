<% layout('layouts/boilerplate')%>


<!-- <div id="cluster-map"></div> -->
<div class="col-md-3 menu d-none d-md-block scroll">
    <a class="h5" href="/biographies">Feature</a>
    <a class="h5" href="/biographies/list">List</a>
    <ol>
        <li><a href="/biographies/list">A - Z</a></li>
        <li><a href="/biographies/list">Birth Year</a></li>
        <li><a href="/biographies/list">Role/Ministry</a></li>
    </ol>
    <a href="/biographies/new">Add Biography</a>
</div>

<div class="col-md-9 col-lg-6 offset-md-3">
    <div class="card mb-3 bg">
        <div class="row">
            <% if (biographies.length) { %> 
            <div class="col-8 text-center p-5">
                <h1> <%= biographies[0].name %> </h1>
                <p><em><%= biographies[0].role %></em></p>
                <p class="text-muted"> (<%= biographies[0].birthYear %> - <%= biographies[0].deathYear %>)  </p>
            </div>
            <div class="col">
                <% if (biographies[0].image.key === 'none') { %> 
                    <img src="/assets/images/<%= biographies[0].gender %>.png" alt="" class="card-img-top rounded-circle img-thumbnail my-3"> <p></p>
                <% } else { %> 
                    <img class='card-img-top rounded img-thumbnail' src= <%= 'https://godinprintsdocuments.s3.amazonaws.com/' + biographies[0].image.key.replaceAll(" ", "+") %> alt="">
                <% } %> 
            </div>
            <div class="row">
                <p class="m-3 lh-lg justify">
                    <span id=<%= biographies[0]._id %>><span class="text-muted">Loading text...</span></span>
                    <a class="stretched-link" href="/biographies/<%= biographies[0]._id %> ">continue</a>
                </p>
                
                <script>
                    let route; let xhttp; const idLength = {}; let txt;
                    idLength[<%- JSON.stringify(biographies[0]._id) %>] = 750;
                </script>
                <!-- <script>getStory();</script> -->

                <div class="row text-center bottom-100 mx-2">
                    <% for (let i = 1; i < biographies.length; i++) { %> 
                    <div class="col-6 offset-3 offset-lg-0 col-lg-4 text-center">
                        <div class="card shadow top-100 translate-middle-y rounded-pill">
                            <div class="row">
                                <div class="col-6 offset-3">
                                    <% if (biographies[i].image.key === 'none') { %> 
                                        <img class="card-img-top rounded-circle img-thumbnail" src="/assets/images/<%= biographies[0].gender %>.png" alt="" > <p></p>
                                    <% } else { %> 
                                        <img class='card-img-top rounded-circle img-thumbnail' src= <%= 'https://godinprintsdocuments.s3.amazonaws.com/' + biographies[i].image.key.replaceAll(" ", "+") %> alt="">
                                    <% } %> 
                                </div>
                                <div class="card-body p-3">
                                    <h5 class="card-title"><%= biographies[i].name %></h5>
                                    <p><em><%= biographies[i].role %></em></p>
                                    <p class="text-muted"> (<%= biographies[i].birthYear %> - <%= biographies[i].deathYear %>)  </p>
                                    <small id=<%= biographies[i]._id %> class="card-text"><span class="text-muted">text loading...</span></small><br>
                                    
                                    <script>idLength[<%- JSON.stringify(biographies[i]._id) %>] = 120;</script>
                                    <a href="/biographies/<%= biographies[i]._id %> " class="btn btn-sm btn-outline-secondary mt-5">Read</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <% } %> 
                </div>
            </div>
            <% } %> 
        </div>
    </div>
</div>


<div class="d-none d-lg-block col-lg-3 offset-lg-9 py-5 text-center position-fixed mh-100 scroll">    

    <p class="text-muted small">        
        <strong>Have you read?</strong>
    </p>

    <% if (adBook[0]) { %> 
    <a href="/books/<%=adBook[0]._id%>" class="">
    <img class='mx-5 my-2 image-size opacity-75 fade-animate' width="60%" src= <%= 'https://godinprintsdocuments.s3.amazonaws.com/' + adBook[0].image.key.replaceAll(" ", "+") %> alt=""> 
    </a>
    <% } %> 

</div>


<div class="d-lg-none col-6 col-md-9 offset-3 py-5 my-5 text-center">    

    <div class="" style="margin-bottom: 200px;"></div>

    <p class="text-muted small pt-2">        
        <strong>Have you read?</strong>
    </p>

    <% if (adBook[0]) { %> 
    <a href="/books/<%=adBook[0]._id%>" class="">
    <img class='mx-5 my-2 image-size opacity-75 fade-animate' width="75%" src= <%= 'https://godinprintsdocuments.s3.amazonaws.com/' + adBook[0].image.key.replaceAll(" ", "+") %> alt=""> 
    </a>
    <% } %> 

</div>

<div class="d-none d-lg-block" style="margin-bottom: 200px;"></div>

<script>
    const pageTitle = "Biographies";
</script>

<script src="/javascripts/get_story.js"></script>